---
title: 目标跟踪结果对比工具
date: 2025-07-30 01:09:15
updated: 2025-08-15 12:31:12
categories:
  - [服务器&嵌入式平台操作, 工具]
tags:
permalink: 目标跟踪结果对比工具/
---

## VOT-Toolkit

$Last Edited：2025.08.05/03:08$
___

> [!NOTE] 版本信息
> 工具包版本是0.7.4，来自VOT2025
> 

### 安装
直接pip下载或者从github主页[votchallenge/toolkit: The official VOT Challenge evaluation and analysis toolkit](https://github.com/votchallenge/toolkit)下载之后再本地安装
```powershell
pip install vot-toolkit
```

本地安装操作如下，以从git上下载的zip文件解压后为例，文件名是`toolkit-master`
```powershell
cd /path/to/toolkit-master
pip install .
```

`vot -h`看一下支持的操作，这些都是后面要说的：
```shell
(trackers) PS D:\CODE\trackers\vot_vot2018> vot -h       
usage: vot [-h] [--debug] [--registry REGISTRY] {test,configure,initialize,evaluate,run,analysis,analyse,analyze,report,document,pack} ...

VOT Toolkit Command Line Interface

options:
  -h, --help            show this help message and exit
  --debug, -d           Backup backend
  --registry REGISTRY   Tracker registry paths

Commands:
  {test,configure,initialize,evaluate,run,analysis,analyse,analyze,report,document,pack}
                        commands
    test                Test a tracker integration on a synthetic sequence
    configure (initialize)
                        Setup a new workspace and download data
    evaluate (run)      Evaluate one or more trackers in a given workspace
    analysis (analyse, analyze)
                        Run analysis of results
    report (document)   Generate report document
    pack                Package results for submission
```
### 新建工作区—initialize
新建工作区的命令`vot initialize`，规则如下：
```shell
vot initialize <stack-name> --workspace <workspace-path>
# 比如，workspace一定要是空文件夹
vot initialize vot2018\longterm --workspace ./vot_vot2018lt
```
这里的`<stack-name>`是数据集名称，用下面的指令会输出可用的stacks：
```shell
(trackers) PS D:\CODE\trackers> vot initialize
Unable to continue without a stack
List of available integrated stacks:
 * otb100 - OTB100 dataset experiment stack
 * otb50 - OTB50 dataset experiment stack
 * tests\basic - VOT Basic Test Stack
 * tests\multiobject - VOTS2023 Test Stack
 * tests\segmentation - VOT Segmentation testing
 * vot2013 - VOT2013 challenge
 * vot2014 - VOT2014 challenge
 * vot2015\rgb - VOT2015 challenge
 * vot2015\tir - VOT-TIR2015 challenge
 * vot2016\rgb - VOT2016 challenge
 * vot2016\tir - VOT-TIR2016 challenge
 * vot2017 - VOT2017 challenge
 * vot2018\longterm - VOT-LT2018 challenge
 * vot2018\shortterm - VOT-ST2018 challenge
 * vot2019\longterm - VOT-LT2019 challenge
 * vot2019\rgbd - VOT-RGBD2019 challenge
 * vot2019\rgbtir - VOT-RGBTIR2019 challenge
 * vot2019\shortterm - VOT-ST2019 challenge
 * vot2020\longterm - VOT-LT2020 challenge
 * vot2020\rgbd - VOT-RGBD2020 challenge
 * vot2020\rgbtir - VOT-RGBTIR2020 challenge
 * vot2020\shortterm - VOT-ST2020 challenge
 * vot2021\longterm - VOT-LT2021 challenge
 * vot2021\rgbd - VOT-RGBD2021 challenge
 * vot2021\shortterm - VOT-ST2021 challenge
 * vot2022\depth - VOT-D2022 challenge
 * vot2022\longterm - VOT-LT2022 challenge
 * vot2022\rgbd - VOT-RGBD2022 challenge
 * vot2022\shortterm - VOT-ST2021 segmentation challenge
 * vot2022\shorttermbox - VOT-ST2022 bounding-box challenge
 * vots2023 - VOTS2023 Challenge Stack
 * vots2024\main - VOTS2024 Challenge Stack
 * vots2024\votst - VOTS2024 ST Challenge Stack
 * vots2024\votstval - VOTS2024 ST Challenge Validation Stack
 * vots2025\main - VOTS2025 Challenge Stack
 * vots2025\realtime - VOTS2025-RT Challenge Stack
 * vots2025\votst - VOTST2025 Challenge Stack
 * vots2025\votstval - VOTS2025 ST Challenge Validation Stack
```

但是发现当前环境的vot库中`C:\Users\Administrator\.conda\envs\trackers\Lib\site-packages\vot\stack`文件目录是空的，这会导致initialize工作区时会出现错误：
```shell
(trackers) PS D:\CODE\trackers> vot initialize otb100 --workspace ./toolkit-workspace     
Experiment stack None not found
```

这个输出也是空的
```
(trackers) PS D:\CODE\trackers> vot initialize
Unable to continue without a stack
List of available integrated stacks:
```

这时需要手动把安装时下载文件目录`toolkit-master`中的`./vot/stack`目录下的文件复制到当前环境的vot库里的`stack`目录下

这时候再新建就能跑通了，一般来说第一次新建会下载数据集：
下载中：
```shell
(trackers) PS D:\CODE\trackers> vot initialize vot2018\longterm --workspace ./vot_vot2018lt
Downloading sequence dataset "VOT2018 Long-Term Challenge" with 35 sequences (total 9.5GiB).
 Downloading          |██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏                                                         |  69% [24:30<11:37]
```
创建完成：
```shell
(trackers) PS D:\CODE\trackers> vot initialize vot2018\longterm --workspace ./vot_vot2018lt
Downloading sequence dataset "VOT2018 Long-Term Challenge" with 35 sequences (total 9.5GiB).
Successfully downloaded all sequences.                                                                                                                                                                                             
Download completed
Initialized workspace in './vot_vot2018lt'
```

如果提示`Workspace already initialized`，并且数据集没有下载，原因应该是workspace的文件目录不是空的，建议删了重新initialize。

我看[vot-toolkit-python测试DiMP50在VOT2018上的表现-CSDN博客](https://blog.csdn.net/laizi_laizi/article/details/110444884)这个博客里，说是有`--nodownload`这个选项，然后自己手动下载数据集，后面再去移动或者建立软连接。
试了下，即使手动配置了数据集还是会在`evaluate`的时候重新下载，可能是我数据集格式不对？
另外`--nodownload`我没试过，上面讲的我的workspace没有数据集这个情况，是因为出了网络问题没下载下来。

### 修改配置文件并测试—test
新建的工作区一般是这个结构：
```text
Mode                 LastWriteTime         Length Name                                                                                                                                                                             
----                 -------------         ------ ----
d-----          2025/8/1      2:17                sequences
-a----          2025/8/1      1:43             54 config.yaml                   
-a----          2025/8/1      2:33            323 trackers.ini
```

按下面这个步骤走：

1. 修改新建工作区中的`trackers.ini`文件，下面是一个已经写好的
```ini
[PLAT]  # <tracker-name>  
label = PLAT  
protocol = traxpython  
  
command = VOTtest  
  
# Specify a path to trax python wrapper if it is not visible (separate by ; if using multiple paths)  
paths = D:/CODE/trackers/plat4edge  
  
# Additional environment paths  
env_PATH = C:/Users/Administrator/.conda/envs/trackers/python.exe
```
中括号里的和==label==就是名字，==command==是需要运行的跟踪文件，名字是自己起的，比如VOTtest就对应我自己的VOTtest.py，也就是包装器（wrapper）文件，分单目标多目标等很多种，在官方的GitHub上有定义写法[integration/python at master · votchallenge/integration](https://github.com/votchallenge/integration/tree/master/python)。注意，command不要带字符'-'，不然会报错：
```powershell
Generating dummy sequence
Traceback (most recent call last):
  File "<string>", line 1, in <module>
NameError: name 'vot' is not defined
Unable to connect to tracker
```
==paths==是包装器文件所在的路径，==env_PATH==是python解释器的路径，这里我用的是虚拟环境的解释器

如果已经有其他跟踪器结果，不需要自行评估，但是后续分析报告会用到，那在后面加上这些：
```ini
[SiamRPN]  # <tracker-name>  
label = SiamRPN  
protocol = traxpython  
  
command = VOTtest
```
前三个参数就够了，类似的可以加很多个，只要名字对上就能用。command要有不然会报错，至于填什么应该无所谓，别空着就行。

2. 创建一个==按照工具包规则定义的单目标跟踪器==python文件，也就是包装器
我的command对应文件`VOTtest.py`改好之后是这样的，之前的跟踪器定义没有confidence返回值，所以还回去改了一下跟踪器代码，就是这个LATtracker_vot
```python
import vot  
import sys  
import time  
import cv2  
import numpy  
import sys  
import os # 导入 os 模块  
  
# --- 在所有其他导入之前，手动将项目根目录添加到 sys.path ---# __file__ 是当前脚本的路径 D:/CODE/trackers/plat4edge/VOTtest.py# os.path.dirname(__file__) 是脚本所在的目录 D:/CODE/trackers/plat4edge# 再取一次 dirname 就得到了项目的根目录 D:/CODE/trackersproject_root = os.path.dirname(os.path.dirname(__file__))  
sys.path.insert(0, project_root)  
  
from plat4edge.tracker.PLATtracker_vot import PLATTracker  

class VOTTracker(object):  
    """  
    符合VOT接口的包装器类，它导入并使用您的 PLATTracker。  
    """  
    def __init__(self, image, region):  
        """  
        初始化函数。  
        Args:            image (numpy.ndarray): VOT提供的第一帧图像 (RGB)。  
            region (vot.Rectangle): VOT提供的初始目标区域。  
        """        # --- 在这里配置您的模型路径 ---        model_path = 'D:/CODE/trackers/plat4edge/siamlat_1.1_70.pth'  
  
        # 1. 实例化您自己的跟踪器  
        self.tracker = PLATTracker(model_path)  
  
        # 2. 将VOT的region格式转换为 [x, y, w, h] 格式  
        bbox = [region.x, region.y, region.width, region.height]  
  
        # 3. 调用核心跟踪器的初始化方法  
        self.tracker.init(image, bbox)  
  
    def track(self, image):  
        """  
        跟踪函数。  
        Args:            image (numpy.ndarray): VOT提供的后续图像帧 (RGB)。  
        Returns:            tuple: (vot.Rectangle, float) 包含预测区域和其置信度。  
        """        # 1. 调用您的跟踪器的更新方法，它现在会返回bbox和confidence  
        predicted_bbox, confidence = self.tracker.update(image)  
  
        # 2. 将返回的 numpy 数组转换为 VOT 需要的 Rectangle 对象  
        predicted_region = vot.Rectangle(predicted_bbox[0], predicted_bbox[1], predicted_bbox[2], predicted_bbox[3])  
  
        # 3. 返回VOT需要的结果  
        return predicted_region, confidence  

# ==========================================================  
#                  VOT 主 循 环  
# ==========================================================  
  
# 1. 初始化VOT句柄  
handle = vot.VOT("rectangle")  
selection = handle.region()  
  
# 2. 获取第一帧并检查  
imagefile = handle.frame()  
if not imagefile:  
    sys.exit(0)  
  
# 3. 读取第一帧图像 (必须是彩色图像)  
image = cv2.imread(imagefile, cv2.IMREAD_COLOR)  
  
# 4. 初始化VOT包装器，这会进一步初始化您的PLATTracker  
tracker = VOTTracker(image, selection)  
  
# 5. 进入主循环  
while True:  
    # 获取新的一帧路径  
    imagefile = handle.frame()  
    if not imagefile:  
        break  # 序列结束  
  
    # 读取图像  
    image = cv2.imread(imagefile, cv2.IMREAD_COLOR)  
  
    # 调用跟踪方法  
    region, confidence = tracker.track(image)  
  
    # 向VOT环境报告结果  
    handle.report(region, confidence)
```

3. 把`vot.py`放到跟踪器python文件可以import的目录中
从site-package里import的vot缺一点东西，官方GitHub提供了另一份`vot.py`文件[integration/python at master · votchallenge/integration](https://github.com/votchallenge/integration/tree/master/python)，可能就是想让我们本地导入的。

4. 使用test指令查看是否能正常运行
如果上面配置都没毛病，运行下面的指令是不会出错的，可以检验一下：
```shell
vot test PLAT -g
```
记得在workspace目录下运行

### 评估模型—evaluate
我比较喜欢在workspace也就是工作区目录下运行，这样就不用加参数--workspace了，以下都是在workspace目录下运行的结果。

看一下参数：
```shell
(trackers) PS D:\CODE\trackers\vot_vot2018> vot evaluate -h
usage: vot evaluate [-h] [--force] [--persist] [--workspace WORKSPACE] [--experiments EXPERIMENTS] trackers [trackers ...]

positional arguments:
  trackers              Tracker identifiers

options:
  -h, --help            show this help message and exit
  --force, -f           Force rerun of the entire evaluation
  --persist, -p         Persist execution even in case of an error
  --workspace WORKSPACE
                        Workspace path
  --experiments EXPERIMENTS
                        Filter specified experiments (comma separated names)
```

评估模型就是用自己的跟踪器跑几遍工作区的数据集，在sequence目录下，这个运行时间很长，不过可以去stack里改，下面会说。
```
vot evaluate PLAT
```

最后工作区里会出现results的文件目录，结构类似：
```
--results
  --PLAT
    --baseline
	 --realtime
	 --unsupervised
```
最后一级是几个要做的实验名，不同数据集可能不一样。历年的官网上可以下载挑战赛对应数据集benchmark模型的结果，结构也是差不多的，同样直接放在这个results目录下就行，后面对比时可以用到。

另外要提一点，评估时如果检测到文件目录存在时不会执行的，建议重新评估时删掉原来的。

在site-package的目录下，类似：`C:\Users\Administrator\.conda\envs\trackers\Lib\site-packages\vot\stack`，能找到这样一些yaml配置文件，按需修改。
以vot2018/shortterm为例：
```yaml
title: VOT-ST2018 challenge

dataset: http://data.votchallenge.net/vot2018/main/description.json

url: http://www.votchallenge.net/vot2018/

experiments:

  baseline:

    type: supervised

    repetitions: 3

    skip_initialize: 5

    analyses:

      - type: supervised_average_ar

        sensitivity: 30

      - type: supervised_eao_score

        low: 100

        high: 356

      - type: supervised_eao_curve

  realtime:

    type: supervised

    realtime:

      grace: 3

    repetitions: 1

    skip_initialize: 5

    analyses:

      - type: supervised_average_ar

        sensitivity: 30

      - type: supervised_eao_score

        low: 100

        high: 356

      - type: supervised_eao_curve

  unsupervised:

    type: unsupervised

    repetitions: 1

    analyses:

      - type: average_accuracy
```
里面包含了几个实验的相关参数，我修改了repetitions到3，这样可以快一些。

### 分析评估结果—analysis
看一下参数：
```shell
(trackers) PS D:\CODE\trackers\vot_vot2018> vot analysis -h
usage: vot analysis [-h] [--workspace WORKSPACE] [--format {json,yaml}] [--name NAME] [trackers ...]

positional arguments:
  trackers              Tracker identifiers

options:
  -h, --help            show this help message and exit
  --workspace WORKSPACE
                        Workspace path
  --format {json,yaml}  Analysis output format
  --name NAME           Analysis output name
```

当上一步评估被正确执行并产生了results文件目录，就可以运行分析，只要有跟踪器在results目录下存在结果就行，所以==直接拿官网结果放在目录下也能分析==:
```shell
vot analysis PLAT --name PLAT 
```
会生成analysis和cache目录

### 得到可视化报告—report
可以看到以下输入参数：
```shell
(trackers) PS D:\CODE\trackers\vot_vot2018> vot report -h     
usage: vot report [-h] [--workspace WORKSPACE] [--format {html,latex,plots}] [--name NAME] [--sequences SEQUENCES] [--experiments EXPERIMENTS] [trackers ...]

positional arguments:
  trackers              Tracker identifiers

options:
  -h, --help            show this help message and exit
  --workspace WORKSPACE
                        Workspace path
  --format {html,latex,plots}
                        Analysis output format
  --name NAME           Document output name
  --sequences SEQUENCES
                        Filter specified sequences (comma separated names)
  --experiments EXPERIMENTS
                        Filter specified experiments (comma separated names)
```

分析得到的analysis目录下json文件看不明白，所以还是得换成图像展示，这就用到了report

report可以生成单个或多个模型的报告，如果是多个模型会在一起比较。
```shell
vot report SiamRPN PLAT SiamFC KCF RCO LADCF ECO DeepCSRDCF
```
会出现report目录以及目录下的html文件

## Pysot-Toolkit
```powershell
 $env:PYTHONPATH = "D:/CODE/trackers/pysot-toolkit;$env:PYTHONPATH"
```

如果在linux/macOS就是：
```bash
export PYTHONPATH='D:/CODE/trackers/pysot-toolkit':$PYTHONPATH
```

```python
ax.grid(b=True)
# matplotib版本更新，从 3.5 版开始 `b` 这个关键字被移除，改成下面这个
ax.grid(True)
```

安装装 **MiKTeX**（体积小、按需下载）或 **TeX Live**（完整、体积大），用来显示绘图结果。