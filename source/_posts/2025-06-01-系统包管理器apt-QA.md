---
title: 系统包管理器apt-Q&A
date: 2025-06-01 10:34:58
updated: 2025-08-09 17:40:58
categories:
  - [服务器&嵌入式平台操作, Q&A问题及解决汇总]
tags:
permalink: 系统包管理器apt-q&a/
---

## apt换源时报错

> [!NOTE] 操作环境
> Ubuntu-22.04.3 server 树莓派4

参考：[RK3399开发板ubuntu20.04报错 binary-arm64/Packages 404 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/589519525)
[Linux：Ubuntu 国内源介绍_ports.ustc.edu.cn-CSDN博客](https://blog.csdn.net/Brendon_Tan/article/details/107061199)

update时报错信息：
```text
E: Failed to fetch http://security.ubuntu.com/ubuntu/dists/focal-security/main/binary-arm64/Packages  404  Not Found [IP: 91.189.91.39 80]
E: Failed to fetch http://cn.archive.ubuntu.com/ubuntu/dists/focal/main/binary-arm64/Packages  404  Not Found [IP: 91.189.91.38 80]
E: Failed to fetch http://cn.archive.ubuntu.com/ubuntu/dists/focal-updates/main/binary-arm64/Packages  404  Not Found [IP: 91.189.91.38 80]
E: Failed to fetch http://cn.archive.ubuntu.com/ubuntu/dists/focal-backports/main/binary-arm64/Packages  404  Not Found [IP: 91.189.91.38 80]
E: Some index files failed to download. They have been ignored, or old ones used instead.
```

有效解决方案：修改sources.list（`vim /etc/apt/sources.list`， 把下面的粘贴上去）
sources.list内容：
```text
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal main restricted universe multiverse `deb-src` http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal main restricted universe multiverse

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-security main restricted universe multiverse `deb-src` http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-security main restricted universe multiverse

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-updates main restricted universe multiverse `deb-src` http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-updates main restricted universe multiverse

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-backports main restricted universe multiverse `deb-src` http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-backports main restricted universe multiverse
```

注意：
1、ubuntu/和ubuntu-ports/的区别：
前者是achieve源，收录的架构为 **AMD64 (x86_64)** 和 **Intel x86，**
后者是ports源，收录的架构为 **arm64**，**armhf**，**PowerPC**，**ppc64el** 和 **s390x，**
RK3399开发板是arm架构，必须用后者。

2、如果报出缺少依赖包、404的错误，大概率还是需要换源，试过dev后面加[arch=amd64,i386]，无效

用清华源时source.list该怎么写，去官网上找：
[ubuntu | 镜像站使用帮助 | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror](https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/)
[debian | 镜像站使用帮助 | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror](https://mirrors.tuna.tsinghua.edu.cn/help/debian/)

## apt下载报错——# Breaks: x11-common (＜ 1:7.7+23~) but 1:7.7+19ubuntu14 is to be installed
参考：[Ubuntu debianutils : Breaks: x11-common (＜ 1:7.7+23~) but 1:7.7+19ubuntu14 is to be installed_debianutils : breaks: x11-common (< 1:7.7+23~) but-CSDN博客](https://blog.csdn.net/qq_26545503/article/details/128792376)

用aptitude的方式安装：
```bash `如果没有"aptitude"这个命令,直接安装`
sudo apt-get install aptitude `通过aptitude安装包`
sudo aptitude install <包名>
是否接受该解决方案？[Y/n/q?] `方案为不安装任何包，保持原样，可以选择拒绝n，会有新的方案`
```