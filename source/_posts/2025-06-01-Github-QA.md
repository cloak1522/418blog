---
title: Github-Q&A
date: 2025-06-01 10:34:58
updated: 2025-04-25 17:31:55
categories:
  - [服务器&嵌入式平台操作, Q&A问题及解决汇总]
tags:
permalink: github-q&a/
---

> [!NOTE] 操作环境
> Ubuntu-22.04.3 server 树莓派4

### clash
#### 1.下载clash
参考[Ubuntu 22.04 安装 Clash | EagleBear2002 的博客](https://eaglebear2002.github.io/%E6%8A%80%E6%9C%AF%E7%A7%91%E6%99%AE/Ubuntu%2022.04%20%E5%AE%89%E8%A3%85%20Clash/)
Github 上的 clash 官方仓库已经删库跑路。可以在[Releases · doreamon-design/clash (github.com)](https://github.com/doreamon-design/clash/releases)下载与自己系统架构符合的压缩包。
这里选择`clash_2.0.24_linux_arm64.tar.gz`

首先创建clash目录，这里我在root目录下创建的：
```bash
sudo mkdir /root/clash
cd clash
```
将压缩包上传到clash目录下，并解压：
```bash
tar -zxvf clash_2.0.24_linux_arm64.tar.gz
```
或者指定解压目录：
```bash
tar -zxvf clash_2.0.24_linux_arm64.tar.gz -C /root/clash
```
添加可执行权限：
```bash
chmod +x clash
```
在clash目录下，运行文件clash：
```bash
root@ubuntu:~/clash# ./clash -d .
INFO[0000] Can't find config, create a initial config file 
INFO[0000] Can't find MMDB, start download              
INFO[0005] inbound mixed://127.0.0.1:7890 created successfully 
```
此时目录下会多出几个文件，`Ctrl+C`先停止运行。
#### 2.配置clash目录下的文件
参考：[linux服务器使用clash代理 - 飞书云文档 (feishu.cn)](https://uestc.feishu.cn/wiki/LOZVwBcNciHdJIkeLDlcwSWdnMf)
[linux环境使用clash实现网络代理访问外网 | 码农家园 (codenong.com)](https://www.codenong.com/cs110925767/)
[在 Linux 中使用 Clash | CodeSwift (iswiftai.com)](https://blog.iswiftai.com/posts/clash-linux/)

 1. config.yaml
参考[Ubuntu22.04桌面版配置Clash for Linux - 编程猎人 (programminghunter.com)](https://www.programminghunter.com/article/89132472759/)
这是clash的配置文件，需要自己找机场，拿到`订阅链接`。我用的是[https://mojie.me/#/register?code=7KH7LcII]。
注意订阅链接需要进行格式转换，转换工具的网址为[在线订阅转换工具 (v1.mk)](https://suburl.v1.mk/)
![Q&A 1.png](/images/Q&A 1.png)
复制下方的短链接，下载配置文件config.yaml。如果直接使用上面的长链接，就会出现类似<line 1: cannot unmarshal !!str `dm1lc3M...` into config.RawConfig>的格式错误。
```bash
# wget -O config.yaml [订阅链接]
wget -O config.yaml https://v1.mk/iK0uLgW
```
如果配置文件正常，运行clash之后应该是这样的结果：
```bash
root@ubuntu:~/clash# ./clash -d .
INFO[0000] Start initial compatible provider 🇯🇵 日本节点    
...  
INFO[0000] Start initial compatible provider 📲 电报消息     
INFO[0000] RESTful API listening at: [::]:9090          
INFO[0000] inbound http://:7890 created successfully    
INFO[0000] inbound socks://:7891 created successfully 
```
 2. Country.mmdb
Country.mmdb为全球IP库，可以实现各个国家的IP信息解析和地理定位。这里我用第一次运行clash后自动下载的文件没有问题。
如果出现问题的话可以试试去前面几篇参考网址中找这个文件，然后替换掉。
提供一个下载的网址[Releases · Dreamacro/maxmind-geoip (github.com)](https://github.com/Dreamacro/maxmind-geoip/releases)
#### 3.配置仪表盘
参考：[linux下部署Clash+dashboard - 系统配置和定制 - ParrotSec中文社区 (parrotsec-cn.org)](https://parrotsec-cn.org/t/linux-clash-dashboard/5169)

clash for linux是不带仪表盘界面的，可以用在线的界面[Clash (razord.top)](https://clash.razord.top/#/proxies)。
也能自己下载并且配置。这里给一个下载地址：[yacd.tar.xz](https://github.com/haishanh/yacd/releases/download/v0.3.7/yacd.tar.xz)。
可以直接到项目里下载。yacd dashboard的GitHub项目[haishanh/yacd: Yet Another Clash Dashboard (github.com)](https://github.com/haishanh/yacd)

下载完成后上传到clash目录下，解压，将文件目录命名为`dashboard`。
```bash
tar -xvf yacd.tar.xz
mv public dashboard
```

打开配置文件`config.yaml`：
```bash
vim config.yaml
```
修改配置文件，添加`external-ui`：
```bash
port: 7890 
socks-port: 7891 
allow-lan: true 
mode: Rule 
log-level: info  `secert:` 123456 # 增加这一行, 如果你希望你的clash web要密码访问可以在这块配置密码, 如果不需要直接注释掉即可
external-ui: dashboard # 增加这一行 后面写入相对路径或绝对路径
external-controller: 0.0.0.0:9090
```
保存退出后运行clash，结果如下：
```bash
root@ubuntu:~/clash# ./clash -d .
INFO[0000] Start initial compatible provider 🇭🇰 香港节点    
... 
INFO[0000] Start initial compatible provider 🌏 国内媒体     
INFO[0000] RESTful API listening at: [::]:9090          
INFO[0000] inbound http://:7890 created successfully    
INFO[0000] inbound socks://:7891 created successfully
```
界面运行在9090端口。注意运行clash要占用当前bash，建议新开一个bash。
#### 4.设置端口转发在本地打开仪表盘
参考：[通过 SSH 转发TCP连接数据 - asml - 博客园 (cnblogs.com)](https://www.cnblogs.com/DragonStart/p/7791311.html#:~:text=%E8%AE%BE%E5%AE%9A%20%E9%A6%96%E5%85%88%E5%8F%8C%E6%96%B9%E7%9A%84%2Fetc%2Fssh%2Fsshd_config%E8%AE%BE%E5%AE%9A%E4%BB%A5%E4%B8%8B%E5%9B%9B%E9%A1%B9%3A%20AllowAgentForwarding%20yes%20AllowTcpForwarding%20yes%20GatewayPorts%20yes,ssh%20-R%202000%20%3A%E7%9B%AE%E6%A0%87%E4%B8%BB%E6%9C%BA%3A%20142%20root%40%20%E6%BA%90%E4%B8%BB%E6%9C%BA%20%E8%BF%99%E6%A0%B7%E5%8F%91%E9%80%81%E5%88%B0%E6%BA%90%E4%B8%BB%E6%9C%BA%3A2000%E7%9A%84TCP%E9%93%BE%E6%8E%A5%2C%E5%B0%B1%E4%BC%9A%E8%BD%AC%E5%8F%91%E5%88%B0%E7%9B%AE%E6%A0%87%3A142%2C%E4%BC%9A%E6%89%93%E5%BC%80%E4%B8%80%E4%B8%AAbash%2C%E5%A6%82%E6%9E%9C%E5%85%B3%E9%97%AD%2C%E5%88%99%E4%B8%8D%E5%86%8D%E8%BD%AC%E5%8F%91.)
首先打开SSH配置文件：
```bash
sudo nano /etc/ssh/sshd_config
```
确保以下设置开启（建议相关修改直接添加在文件开头，方便查看）
```text
AllowAgentForwarding yes
AllowTcpForwarding yes
GatewayPorts yes
```
保存退出。

本地主机与树莓派处于两个不同的局域网之中，因此需要先将云服务器的9090端口映射到本地的9090端口。注意在云服务器安全组配置中开放9090端口，只开放入方向就可以。

在树莓派上运行指令：
```bash
ssh -N -R 9090:localhost:9090 root@59.110.168.138
```  
指令用于建立一个SSH隧道（tunnel），注意运行时要占用当前bash，建议新开一个bash。具体来说，该指令的含义如下：

- `ssh`: SSH命令的关键字。
- `-N`: 表示不执行任何远程命令。在这个上下文中，它告诉SSH客户端仅仅建立连接，而不执行任何远程命令。如果没有这句话，会在输入密码后登录远程主机。
- `-R 9090:localhost:9090`: 这是SSH端口转发的部分。它将远程主机（`59.110.168.138`）的端口 `9090` 映射到本地主机（localhost）的端口 `9090`。这意味着，如果你连接到远程主机的 `9090` 端口，实际上是连接到本地主机的 `9090` 端口。这通常用于在两个主机之间建立一个安全的通信通道。
- `root@59.110.168.138`: 这是SSH连接的目标地址，其中 `root` 是用户名，`59.110.168.138` 是远程主机的IP地址。

此时，在云服务器运行指令`lsof`可以看到端口9090占用情况：
```bash
root@iZ2zeamp64f3i8d4gvpba8Z:~# lsof -i:9090
COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
sshd    34205 root    5u  IPv4 616381      0t0  TCP localhost:9090 (LISTEN)
```

本地主机按Win+R，输入cmd，打开命令提示符，运行指令：
```shell
ssh -N -L 9090:localhost:9090 root@59.110.168.138
```

此时在命令提示符中运行指令`netstat`可以看到端口9090占用情况：
```shell
C:\Users\Administrator>netstat -ano | find "9090"
  TCP    127.0.0.1:9090         0.0.0.0:0              LISTENING       28772
  TCP    [::1]:9090             [::]:0                 LISTENING       28772
```

端口转发设置完成后，运行clash（确保仪表盘配置完成）在浏览器中输入[localhost:9090/ui](http://localhost:9090/ui/)即可打开仪表盘界面，对clash节点等进行配置。
#### 5.测试clash是否能使用
从前面clash运行的结果可以知道，HTTP Proxy Port是7890端口。
这段指令会下载rapicam-apps，可以换成自己要用到的指令测试。
```bash
root@ubuntu:~# git clone -c http.proxy=http://127.0.0.1:7890 https://github.com/raspberrypi/rpicam-apps.git
Cloning into 'rpicam-apps'...
remote: Enumerating objects: 2643, done.
remote: Counting objects: 100% (1356/1356), done.
remote: Compressing objects: 100% (340/340), done.
remote: Total 2643 (delta 1088), reused 1033 (delta 1016), pack-reused 1287
Receiving objects: 100% (2643/2643), 742.82 KiB | 1.10 MiB/s, done.
Resolving deltas: 100% (1919/1919), done.
```
### steamcommunity302
$Last Edited：2025.02.20/10:33$
___

针对github的。
来源于：
[Linux/Macos环境下使用 steamcommunity 302 教程 – Dogfight360](https://www.dogfight360.com/blog/2319/)
中间提到了hosts写入的问题，但是我没明白怎么操作，所以就没操作，不过最后也能连上github。
1. 下载`steamcommunity302`
	下载地址：[steamcommunity 302 Ver.12.1.46 – Dogfight360](https://www.dogfight360.com/blog/686/)
	使用方法：[steamcommunity302详细功能介绍](https://www.dogfight360.com/blog/knowledge-base/steamcommunity_302_manual/)
	下载完成后解压运行，首先在windows系统上配置完成。
2. 下载`caddy`
	下载地址： [https://github.com/caddyserver/caddy/releases/tag/v2.6.4](https://github.com/caddyserver/caddy/releases/tag/v2.6.4)
	==注意对应系统版本==，tar.gz/zip的压缩包格式的。
	下载完成后解压。
3. 编辑 `steamcommunity_302.caddy.json`
	将端口11417（这个是随机的）批量替换为443。类似：
```text
https://steamcommunity.com:17417 https://www.steamcommunity.com:17417 {

    tls steamcommunity.crt steamcommunity.key

    @steamcommunityrp {

    }
```
4. 将302目录下的文件与caddy一同拷贝到Linux/Macos (一共是6个文件)
```text
steamcommunityCA.pem  
steamcommunityCA.key  
steamcommunity.key  
steamcommunity.crt  
steamcommunity_302.caddy.json  
caddy
```
5. 导入根证书`steamcommunityCA.pem`
	**Ubuntu**:  
```bash
sudo cp steamcommunityCA.pem /usr/local/share/ca-certificates/steamcommunityCA.crt
sudo update-ca-certificates
```
6. 运行
```bash
chmod +x caddy
./caddy run --config steamcommunity_302.caddy.json --adapter caddyfile
```
### hiddify
$Last Edited：2025.02.27/09:48$
___

是类似clash的代理工具，需要有机场   我 的`订阅链接`。
在[Releases · hiddify/hiddify-app](https://github.com/hiddify/hiddify-app/releases)下载系统对应版本，目前只有x64的，因此对于ARM架构的处理器。这种方案不可行。

Unbuntu系统安装方式：
```bash
cd 下载文件目录
sudo dpkg -i Hiddify-Debian-x64.deb
```

- 桌面版打开程序，通过`订阅链接`下载配置文件，点击`连接`即可运行。图像界面较为简单，此处不再赘述。